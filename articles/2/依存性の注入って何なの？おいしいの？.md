*****
{"path": "2/依存性の注入って何なの？おいしいの？.md", "img": "../static/question_head_gakuzen_boy.png", "tag": "プログラミング", "date": "2020-07-30"}
*****

## 概要

プログラミング経験がある人なら聞いたことがある言葉、そう<b>依存性の注入(DI)</b>です。

では依存性の注入とは一体何なのでしょう？

## 依存性の注入とは
DIとは「Dependency injection」の略語であり、日本語では「依存性の注入」という言葉で表されています。

Wikipediaには、

> 依存性の注入（いそんせいのちゅうにゅう、英: Dependency injection）とは、コンポーネント間の依存関係をプログラムのソースコードから排除するために、外部の設定ファイルなどでオブジェクトを注入できるようにするソフトウェアパターンである。英語の頭文字からDIと略される。

私はこの説明を見た時に、「依存性？注入？なんのこっちゃ」と思いました。

「依存性の注入」を理解するためにまずは<b>依存性</b>と<b>注入</b>という単語の意味について見ていきます。

## プログラミングにおける依存とは
一般的に依存とは、<b>自身以外のものに頼って存在している</b>ことを意味します。

例文：メンヘラな彼女は彼氏に依存している。

↑の状態をプログラムで表現してみると、以下のようになります。

```Kotlin
class MenheraGirlFriend {
    // メンヘラ彼女の彼氏
    val boyFriend = BoyFriend()

    // 生きるためには彼氏が必要
    fun alive() {
        boyFriend.need()
    }
}
```

MenheraGirlFriendは<i>alive()</i>を呼び出すためには<i>boyFriend</i>のインスタンスの存在が必須となっています。（当然ながら<i>boyFriend</i>が存在しないと<i>alive</i>を呼び出せない。）<br>
つまり<i>MenheraGirlFriend</i>は<i>BoyFriend</i>に<b>依存</b>していると言えます。

上記のような状態を抽象化して表すと、
<b>AクラスはBクラスに依存している</b>や<b>AクラスとBクラスは依存関係にある</b>という風に表現されます。

## プログラミングにおける注入とは
次に注入という単語について見ていきます。

注入とは、「注ぎ入れること」や「送り込むこと」などの意味があります。命名通りですねw

ここで再び先程のプログラムの例を見て、注入について考えていきましょう。

```Kotlin
class MenheraGirlFriend {
    // メンヘラ彼女の彼氏
    val boyFriend = BoyFriend()

    // 生きるためには彼氏が必要
    fun alive() {
        boyFriend.need()
    }
}
```

```Kotlin
val boyFriend = BoyFriend()
```
上記が「注ぎ入れること」や「送り込むこと」に該当する箇所になります。
つまり注入とは、<b>単純に変数にインスタンスを代入する</b>、だけのことです。簡単ですね。

## では依存性の注入(DI)とは
ここまで依存と注入について、以下の様な説明をしてきました。

依存: <i>MenheraGirlFriend</i>は<i>BoyFriend</i>に依存していること
注入：<i>MenheraGirlFriend</i>が持つBoyFriend型のプロパティに<i>BoyFriend</i>インスタンスを代入すること

上記を合わせると、
```
MenheraGirlFriendが依存しているBoyFriendインスタンスを、BoyFriend型のプロパティに代入する。
```
ということです。

つまり依存性の注入とは、
<b>あるクラスに依存しているオブジェクト</b>を<b>代入する</b>

ということを表しているだけなのです。

## まとめ
依存性の注入は初見だと難しそうなイメージがありましたが、
意味としてはすごく単純で普段から意識せずにやっていることでした。

ここでは依存性の注入の意味についてのみ説明してきましたが、依存性の注入の種類やメリットについても触れていきたいと思います。

## 参考文献
- [Dependency injection in Android](https://developer.android.com/training/dependency-injection)
